# ฺฏุฒุงุฑุด ุญุณุงุจุฑุณ ูู ู ุชุงุฏ ููุดู ุฑุงู (Roadmap Audit Report) - ฒฐฒด

ุงู ฺฏุฒุงุฑุด ุชูุณุท ูููุฏุณ ุงุฑุดุฏ ุจฺฉโุงูุฏ (Principal Backend Engineer) ุจุฑุง ุจุฑุฑุณ ูุถุนุช ูพุงุฏูโุณุงุฒ ููุงุฑุฏ ุฐฺฉุฑ ุดุฏู ุฏุฑ `DETAILED_ROADMAP.md` ุชูู ุดุฏู ุงุณุช.

---

## ูุถุนุช ฺฉู ูพุฑูฺู: ๐ข (ุขูุงุฏู ุชููุฏ - Production Ready)
**ุงูุชุงุฒ ููุง ุขูุงุฏฺฏ ุชููุฏ: นต/ฑฐฐ**

---

## ุจุฑุฑุณ ุฌุฒุฆ ูุงุฒูุง

### ูุงุฒ ฑ: ูพุงุฏุงุฑ ุจุญุฑุงู (Media & Contract)
*   **Enforce mediaId Only Flow:** โ **ุชุงุฏ ุดุฏ**
    *   ุณุฑูุณโูุง Salons, Artists ู Verification ุจู ุทูุฑ ฺฉุงูู ุจุงุฒููุณ ุดุฏูโุงูุฏ.
    *   ูุชุฏ `attachMedia` ูุงูฺฉุช ูุงู ุฑุง ฺฺฉ ูโฺฉูุฏ.
    *   ุขุจุฌฺฉุชโูุง ุชูุฏุฑุชู Media ุงุฒ ููุฏุชูุฑูุง ุญุฐู ุดุฏูโุงูุฏ.
*   **OpenAPI Contract Hardening:** โ **ุชุงุฏ ุดุฏ**
    *   ูฺ `z.any()` ุฏุฑ ุงุณฺฉูุงูุง ูพุงุณุฎ ุจุงู ููุงูุฏู ุงุณุช.
    *   ุชูุงู ูพุงุณุฎโูุง ุฏุฑ ูพูุดุด `withApiSuccess` ูุฑุงุฑ ุฏุงุฑูุฏ.
    *   ููุฏุดู ูพุงุณุฎโูุง (`validateResponses: true`) ุฏุฑ `app.ts` ูุนุงู ุงุณุช.
*   **Routing Shadow Removal:** โ **ุชุงุฏ ุดุฏ**
    *   ุชุฑุชุจ ุชุนุฑู ูุณุฑูุง ุงุตูุงุญ ุดุฏู ู ุชุฏุงุฎู ุฏุฑ ูพุงุฑุงูุชุฑูุง (ูุงููุฏ `:slug` ู ูุณุฑูุง ุงุณุชุงุชฺฉ) ูุฌูุฏ ูุฏุงุฑุฏ.

### ูุงุฒ ฒ: ุงููุช ู ูุงู ฺฉูุชุฑู (Hardening & Control Plane)
*   **BigInt Serialization Audit:** โ **ุชุงุฏ ุดุฏ**
    *   ูุฏูโูุฑ `response.middleware.ts` ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน `serialize` ุชูุงู ููุฏูุง BigInt ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจู String ุชุจุฏู ูโฺฉูุฏ.
*   **RBAC Boundary Audit:** โ **ุชุงุฏ ุดุฏ**
    *   ุชูฺฉฺฉ ุฏูู ุจู `ADMIN` ู `MODERATOR` ุฏุฑ `roles.ts` ู ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุฑูุง ุงุฎุชุตุงุต ุฏุฑ ุชูุงู ูุงฺููโูุง.
*   **Admin Taxonomy Control Plane:** โ **ุชุงุฏ ุดุฏ**
    *   `AdminTaxonomyController` ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.
    *   ููุทู Reorder ุจุฑุง ุฏุณุชูโุจูุฏโูุง ู ุชุฎุตุตโูุง ูุนุงู ุงุณุช.

### ูุงุฒ ณ: ุนููฺฉุฑุฏ ู ุณุฆู (Performance & SEO)
*   **Persian FTS (Postgres):** โ **ุชุงุฏ ุดุฏ**
    *   ุงุณุชูุงุฏู ุงุฒ `tsvector` ู ุชุฑฺฏุฑูุง ุงุฎุชุตุงุต ุฑู ุฌุฏุงูู ุงุตู.
    *   ูพุงุฏูโุณุงุฒ `SearchService` ุจุง ฺฉูุฆุฑโูุง Raw SQL ุจุฑุง ุฏูุช ุจุงูุง ุฏุฑ ุฒุจุงู ูุงุฑุณ.
*   **Geographical Landing Optimization:** โ **ุชุงุฏ ุดุฏ**
    *   ุฌุฏูู `geo_citystats` ุนููุงุช ุงุณุช ู ุขูุงุฑูุง ุชุฌูุน ุฑุง ุจุฑุง ุณุฆู ุฐุฎุฑู ูโฺฉูุฏ.

### ูุงุฒ ด: ูุดุงูุฏูโูพุฐุฑ (Observability)
*   **Global Error Hardening:** โ **ุชุงุฏ ุดุฏ**
    *   ุชูฺฉฺฉ `OperationalError` ุงุฒ ุฎุทุงูุง ุณุณุชู ู ูุฏุฑุช ุงูู ูุงฺฏโูุง ุฏุฑ Production.
*   **Logging & Request Context:** โ **ุชุงุฏ ุดุฏ**
    *   ุงูุชุดุงุฑ `requestId` ุงุฒ ุทุฑู `AsyncLocalStorage` ุฏุฑ ุชูุงู ูุงูโูุง (Express -> Services -> Prisma).

---

## ูุณุช ฺฺฉโูุณุช ููุง (Final Checklist)

*   [x] Enforce mediaId Only
*   [x] OpenAPI Schema Fixed
*   [x] Route Shadows Removed
*   [x] BigInt Safe
*   [x] RBAC Owner Check Audit
*   [x] Sitemap Stream Implementation

---
**ูุชุฌูโฺฏุฑ:** ูพุฑูฺู Sevra Atlas ุชูุงู ูพุดโูุงุฒูุง Refactoring ู Hardening ุฑุง ุทุจู ููุดู ุฑุงู ูพุดุช ุณุฑ ฺฏุฐุงุดุชู ู ุงุฒ ูุธุฑ ูู ุฏุฑ ุณุทุญ ุงุณุชุงูุฏุงุฑุฏูุง ุจุงูุง ุชููุฏ ูุฑุงุฑ ุฏุงุฑุฏ.
